
<form (ngSubmit)="onSubmit()" #probeForm="ngForm">
  <div class="row">
    <div class="form-group col-2" style="border: 1px solid yellow"></div>
    <div class="form-group col-4" style="border: 1px solid green"></div>
    <div class="form-group col-6" style="border: 1px solid red"></div>
  </div>

  <h3>New Probe</h3>

  <div class="form-group offset-2 col-4">
    <label for="probeURL">Probe URL:</label>
    <input name="probeURL" type="text" class="form-control" id="probeURL" 
        placeholder="http://www.google.com" required [(ngModel)]="probe.probeURL" #probeURL="ngModel">
  </div>

  <div [hidden]="probeURL.valid || probeURL.pristine" class="alert alert-danger">
     Probe URL is required
  </div>

  <h5>Notification</h5>

  <div class="form-group offset-2 col-4">
    <label for="policy">Notification policy:</label>
    <select class="form-control" name="policy" id="policy" [(ngModel)]="probe.notification_policy_id" >
      <option *ngFor="let policy of policies" value="{{policy._id}}">{{policy.name}}  </option>
    </select>
  </div>

  <h5>General Settings</h5> 

  <div class="form-group offset-2 col-4">
      <label for="interval">Monitoring interval:</label>
      <input type="range" class="form-control-range" id="interval" step="60" min="60" max="300" name="interval" [(ngModel)]="probe.interval">
  </div>
  
  <div class="form-group offset-2 col-4">
    <label for="locations">Locations (select multiple):</label>
    <select multiple class="form-control" name="locations" id="locations" [(ngModel)]="probe.locations" #locations="ngModel">
      <option *ngFor="let location of locations_list" value="{{location}}" >{{location}}  </option>
    </select>
  </div>
    
  <div class="form-group offset-2 col-2">
      <label for="port">Port:</label>
      <input type="number" class="form-control" id="port" placeholder="80" name="port" [(ngModel)]="probe.port" required  #port="ngModel">
      <div [hidden]="port.valid || port.pristine" class="alert alert-danger"> Port value is required</div>
  </div>


  <div class="form-group offset-2 col-2">
    <label for="method">Method:</label>
    <select class="form-control" id="method" name="method" [(ngModel)]="probe.method" #method="ngModel"> 
      <option *ngFor="let method of methods">{{method}}</option>
    </select>
  </div> 
  
  <div [hidden]="method.value!='POST'" class="form-check">
      <input class="form-check-input" type="checkbox" value="" id="post-body-json">
      <label class="form-check-label" for="post-body-json"> POST body is JSON</label>
      <br/><br/>
  </div>

  <div class="form-group offset-2 col-4" [hidden]="method.value=='GET'" >
    <label for="post-body">Request body:</label>
    <textarea class="form-control" id="post-body" rows="3"></textarea>
  </div>
  
  <div class="form-group offset-2 col-4">
    <label for="headers">Headers:</label>
    <textarea class="form-control" id="headers" rows="3" placeholder='{"key":"value"}' [(ngModel)]="probe.headers" name="headers" #headers="ngModel"></textarea>
  </div>

  <h5>Content Check</h5> 

  <div class="form-group offset-2 col-4">
    <label for="keywords">Keywords:</label>
    <input type="text" class="form-control" name="keywords" id="keywords" [(ngModel)]="probe.matchPolicy.keywords">
   
    <div class="form-check">
      <input class="form-check-input" type="checkbox" value="" id="exactMatch">
      <label class="form-check-label" for="exactMatch"> Exact match</label>
    </div>

  </div>
  
  <h5>Basic Authentication</h5> 

  <div class="form-group offset-2 col-4">
      <label for="user">Username:</label>
      <input type="text" class="form-control" id="user">
  </div>

  <div class="form-group offset-2 col-4">
      <label for="pass">Password:</label>
      <input type="password" class="form-control" id="pass">
  </div>

  <div class="form-group offset-2 col-4">
    <button type="submit" class="btn btn-success" [disabled]="!probeForm.form.valid">Save</button>
  </div>

</form>