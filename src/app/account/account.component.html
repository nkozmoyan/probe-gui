<h4>Account Settings</h4>

<div class="card top-buffer" style="margin-bottom:30px">
    <div class="card-body">
      <h4>{{userInfo.name}}</h4>
      <h6 class="card-subtitle mb-2 text-muted">{{userInfo.email}}</h6>
    </div>
  </div>

  <div class="alert alert-warning alert-dismissible" role="alert" *ngIf="userPassword.invalid && (userPassword.dirty || userPassword.touched)">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <ng-container *ngIf="userPassword.errors?.mismatch;
      then first else second">
    </ng-container>
    <ng-template #first> Password does not match the confirm password.</ng-template>
    <ng-template #second>Password needs to be more than 6 characters.</ng-template>
  </div>

  <div class="alert alert-warning alert-dismissible" role="alert" *ngIf="message !== ''">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span></button>
      {{message}}
  </div>
  
  <accordion closeOthers="true">
    <accordion-group heading="Change password">

      <form novalidate class="form-signin" (ngSubmit)="handleForm()" #signupForm="ngForm">
        <div class="form-group">
            <label for="currentPassword" class="col-lg-3" >Current Password:</label>
            <input id="currentPassword" required  type="password" class="form-control col-lg-3" 
              placeholder="Password" [(ngModel)]="userInfo.currentPassword" name="pwd" #password="ngModel" [ngModelOptions]="{updateOn: 'blur'}" />
        </div>

        <div ngModelGroup="passwordGroup" #userPassword="ngModelGroup" passwordMatch >
            <div class="form-group">
            <label for="inputPassword" class="col-lg-3" >Password:</label>
            <input id="inputPassword"   minlength ="6" type="password" class="form-control col-lg-3" 
              placeholder="Password" [(ngModel)]="userInfo.password" name="pwd" #password="ngModel" [ngModelOptions]="{updateOn: 'blur'}" />
            </div>
  
            <div class="form-group">
            <label for="confirmPassword" class="col-lg-3" >Confirm Password:</label>
            <input id="confirmPassword"  type="password" class="form-control col-lg-3" 
            placeholder="Confirm Password" [(ngModel)]="userInfo.confirmPassword" name="confirmPwd" [ngModelOptions]="{updateOn: 'blur'}"   />
          </div>
      </div>
  
      <br>
        <button class="btn btn-md btn-primary btn-block col-lg-3" type="submit" [disabled]="!signupForm.form.valid">Change Password</button>
    </form>


    </accordion-group>
    <accordion-group heading="Terminate Account">
        <form novalidate class="form-terminate" (ngSubmit)="terminate()" #terminationForm="ngForm">

        <div>This will immediately log you out of your account and you will not be able to log in again.
          <br>
        </div>
        <div class="form-check">
            <input type="checkbox" 
              [(ngModel)]="terminationConsent"
              [ngModelOptions]="{standalone: true}"
              class="form-check-input" id="terminationConsent">
            <label class="form-check-label" for="terminationConsent">I want to delete my account.</label>
        </div>
        <br/>
      <button class="btn btn-md btn-primary btn-block col-lg-3" type="submit" [disabled]="!terminationConsent">Terminate Account</button>   
        </form>
    </accordion-group>
  </accordion>